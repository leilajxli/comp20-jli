<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <title>Captain's Log</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>

    $(document).ready( function() {
    
        //var pressEnter = jQuery.Event ("keydown", { keyCode: 13 });  
        var messages = localStorage.getItem("messages");
        // messages is a string object that stores the stringified array of values stored in the localStorage 

        if ( messages ) {
            messages = JSON.parse(localStorage.getItem("messages")); 
            //make it an object again
            console.log("outside of the for loop");
            for (var i = messages.length - 1; i >= 0; i--) {
                $("#log").append ("<p>" + messages[i] + "</p>"); 
                console.log("in the for loop");
            };
        } else {
            messages = [];
            console.log("in the else loop");
        }
        
        $("#msg").keypress(function(event){
            
            if (event.which == "13"){
            //store a new input in the local storage
            var timeStamp = new Date().getTime();
            var msgValue = "<p>" + timeStamp + " - " + $("input").val() + "</p>"; 
           
            messages.push(msgValue); 
            localStorage.setItem ("messages", JSON.stringify(messages)); 
            };

            $("#log").prepend(msgValue);
        });
    });  

    </script>
</head>

<body>
    <h1>Captain's Log</h1>
    <h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
    <div id="log"></div>
</body>
</html>